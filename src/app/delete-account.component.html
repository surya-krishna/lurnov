<section class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-[#18181b] via-[#1a1333] to-[#2d225a] px-4">
  <div class="max-w-md w-full bg-[#23244a] rounded-2xl shadow-4xl p-8 mt-24 text-white relative z-10">
    <h1 class="text-2xl md:text-4xl font-bold text-primary mb-6 drop-shadow-glow text-center">Delete Account</h1>
    <form #deleteForm="ngForm" (ngSubmit)="onDelete()" class="flex flex-col gap-6">
      <div>
        <label for="email" class="block text-cyan mb-2 font-semibold">Email Address</label>
        <input type="email" id="email" name="email" [(ngModel)]="email" required class="w-full px-4 py-2 rounded-lg bg-background text-white border border-cyan focus:outline-none focus:ring-2 focus:ring-primary" />
      </div>
      <button *ngIf="!emailSent" type="button" class="bg-gradient-to-r from-[#eb2563] to-[#a21caf] text-white font-bold py-2 px-6 rounded-full text-lg transition-all duration-300 transform hover:scale-105 shadow-lg shadow-pink-500/30" (click)="sendOtp()" [disabled]="loading || emailSent || !email">
        Send OTP
      </button>
      <div *ngIf="emailSent" class="flex flex-col gap-4">
        <label for="otp" class="block text-cyan mb-2 font-semibold">Email OTP</label>
        <input type="text" id="otp" name="otp" [(ngModel)]="otp" maxlength="6" required class="w-full px-4 py-2 rounded-lg bg-background text-white border border-cyan focus:outline-none focus:ring-2 focus:ring-primary" />
        <button type="submit" class="bg-gradient-to-r from-[#eb2563] to-[#a21caf] text-white font-bold py-2 px-6 rounded-full text-lg transition-all duration-300 transform hover:scale-105 shadow-lg shadow-pink-500/30" [disabled]="loading || !otp">
          Delete Account
        </button>
      </div>
    </form>
    <div *ngIf="showConfirm" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
      <div class="bg-[#23244a] rounded-2xl shadow-4xl p-8 max-w-sm w-full text-center">
        <h2 class="text-xl font-bold text-accent mb-4">Are you sure?</h2>
        <p class="text-gray-200 mb-4">All your subscriptions will be lost and your account will be permanently removed. This action cannot be undone.</p>
        <button class="bg-gradient-to-r from-[#2563eb] to-[#23244a] text-white font-bold py-2 px-6 rounded-full text-lg mr-2" (click)="confirmDelete()">Confirm</button>
        <button class="bg-gray-700 text-white font-bold py-2 px-6 rounded-full text-lg ml-2" (click)="cancelDelete()">Cancel</button>
      </div>
    </div>
    <div *ngIf="showFinal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
      <div class="bg-[#23244a] rounded-2xl shadow-4xl p-8 max-w-sm w-full text-center">
        <h2 class="text-xl font-bold text-primary mb-4">Request Submitted</h2>
        <p class="text-gray-200 mb-4">You will receive a link to your email to delete your account. Please check your inbox and follow the instructions.</p>
        <button class="bg-gradient-to-r from-[#2563eb] to-[#23244a] text-white font-bold py-2 px-6 rounded-full text-lg" (click)="closeFinal()">Close</button>
      </div>
    </div>
    <div *ngIf="errorMessage" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50">
      <div class="bg-[#23244a] rounded-2xl shadow-4xl p-8 max-w-sm w-full text-center">
        <h2 class="text-xl font-bold text-red-400 mb-4">Error</h2>
        <p class="text-gray-200 mb-4">{{ errorMessage }}</p>
        <button class="bg-gradient-to-r from-[#eb2563] to-[#a21caf] text-white font-bold py-2 px-6 rounded-full text-lg" (click)="errorMessage=''">Close</button>
      </div>
    </div>
  </div>
</section>
